{"filter":false,"title":"stack.test.ts","tooltip":"/main-workshop/test/stack.test.ts","undoManager":{"mark":43,"position":43,"stack":[[{"start":{"row":0,"column":0},"end":{"row":40,"column":0},"action":"insert","lines":["import { expect as expectCDK, haveResource } from '@aws-cdk/assert';","import * as cdk from 'aws-cdk-lib';","import * as MyProject from '../lib';","","test('MainWorkshopStack has Lambda Function', () => {","    const app = new cdk.App();","    // WHEN","    const stack = new MyProject.MainWorkshopStack(app, 'MyTestStack');","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::Lambda::Function\"));","});","","test('MyCodePipeline has Pipeline', () => {","    const app = new cdk.App();","    // WHEN","    const stack = new MyProject.MyCodePipeline(app, 'MyTestPipeline');","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::CodePipeline::Pipeline\"));","});","","test('HitCounter has DynamoDB Table', () => {","    const app = new cdk.App();","    const fn = new lambda.Function(stack, 'Lambda', {","        runtime: lambda.Runtime.NODEJS_12_X,","        handler: 'hello.handler',","        code: lambda.Code.fromInline('exports.handler = function(event, ctx, cb) { return cb(null, \"hi\"); }'),","    });","    // WHEN","    const stack = new MyProject.HitCounter(app, 'MyTestHitCounter', { downstream: fn });","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::DynamoDB::Table\"));","});","","test('StageFile has MainWorkshopStack', () => {","    const app = new cdk.App();","    // WHEN","    const stage = new MyProject.StageFile(app, 'MyTestStage');","    // THEN","    expectCDK(stage).to(haveResource(\"AWS::Lambda::Function\")); // Assuming MainWorkshopStack creates a Lambda function","});",""],"id":90}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":51},"action":"insert","lines":["const { handler } = require('../lib/lambda/hello');"],"id":91}],[{"start":{"row":3,"column":51},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":92}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":58},"action":"insert","lines":["import { MainWorkshopStack } from './main-workshop-stack';"],"id":93}],[{"start":{"row":2,"column":36},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":94}],[{"start":{"row":3,"column":0},"end":{"row":6,"column":52},"action":"insert","lines":["import { Template, Capture } from 'aws-cdk-lib/assertions';","import * as cdk from 'aws-cdk-lib';","import * as lambda from 'aws-cdk-lib/aws-lambda';","import * as apigw from 'aws-cdk-lib/aws-apigateway';"],"id":95}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["// "],"id":96}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":3},"action":"insert","lines":["// "],"id":97}],[{"start":{"row":26,"column":30},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":98},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":27,"column":4},"end":{"row":31,"column":5},"action":"insert","lines":["const fn = new lambda.Function(stack, 'TestFunction', {","    runtime: lambda.Runtime.NODEJS_14_X,","    handler: 'hello.handler',","    code: lambda.Code.fromAsset('lib/lambda')","  });"],"id":99}],[{"start":{"row":25,"column":45},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":100},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":27,"column":30},"end":{"row":28,"column":0},"action":"insert","lines":["",""],"id":101},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":28,"column":4},"end":{"row":28,"column":34},"action":"insert","lines":["const stack = new cdk.Stack();"],"id":102}],[{"start":{"row":2,"column":28},"end":{"row":2,"column":29},"action":"insert","lines":["("],"id":103}],[{"start":{"row":2,"column":28},"end":{"row":2,"column":29},"action":"remove","lines":["("],"id":104}],[{"start":{"row":2,"column":27},"end":{"row":2,"column":28},"action":"insert","lines":["("],"id":105}],[{"start":{"row":2,"column":36},"end":{"row":2,"column":37},"action":"insert","lines":[")"],"id":106}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":0},"action":"remove","lines":["import { expect as expectCDK, haveResource } from '@aws-cdk/assert';","// import * as cdk from 'aws-cdk-lib';","import * as MyProject from ('../lib');","import { Template, Capture } from 'aws-cdk-lib/assertions';","import * as cdk from 'aws-cdk-lib';","import * as lambda from 'aws-cdk-lib/aws-lambda';","import * as apigw from 'aws-cdk-lib/aws-apigateway';","const { handler } = require('../lib/lambda/hello');","// import { MainWorkshopStack } from './main-workshop-stack';","test('MainWorkshopStack has Lambda Function', () => {","    const app = new cdk.App();","    // WHEN","    const stack = new MyProject.MainWorkshopStack(app, 'MyTestStack');","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::Lambda::Function\"));","});","","test('MyCodePipeline has Pipeline', () => {","    const app = new cdk.App();","    // WHEN","    const stack = new MyProject.MyCodePipeline(app, 'MyTestPipeline');","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::CodePipeline::Pipeline\"));","});","","test('HitCounter has DynamoDB Table', () => {","    ","    const app = new cdk.App();","    const stack = new cdk.Stack();","    const fn = new lambda.Function(stack, 'TestFunction', {","    runtime: lambda.Runtime.NODEJS_14_X,","    handler: 'hello.handler',","    code: lambda.Code.fromAsset('lib/lambda')","  });","    const fn = new lambda.Function(stack, 'Lambda', {","        runtime: lambda.Runtime.NODEJS_12_X,","        handler: 'hello.handler',","        code: lambda.Code.fromInline('exports.handler = function(event, ctx, cb) { return cb(null, \"hi\"); }'),","    });","    // WHEN","    const stack = new MyProject.HitCounter(app, 'MyTestHitCounter', { downstream: fn });","    // THEN","    expectCDK(stack).to(haveResource(\"AWS::DynamoDB::Table\"));","});","","test('StageFile has MainWorkshopStack', () => {","    const app = new cdk.App();","    // WHEN","    const stage = new MyProject.StageFile(app, 'MyTestStage');","    // THEN","    expectCDK(stage).to(haveResource(\"AWS::Lambda::Function\")); // Assuming MainWorkshopStack creates a Lambda function","});",""],"id":107}],[{"start":{"row":0,"column":0},"end":{"row":54,"column":0},"action":"insert","lines":["import { App } from 'aws-cdk-lib';","import { HitCounter, HitCounterProps } from './hitcounter';","import { MainWorkshopStack } from './main-workshop-stack';","import { StageFile } from './stage-file';","","describe('HitCounter', () => {","  let app: App;","  let stack: MainWorkshopStack;","","  beforeEach(() => {","    app = new App();","    stack = new MainWorkshopStack(app, 'TestStack');","  });","","  test('HitCounter creates DynamoDB table and Lambda function', () => {","    // Arrange","    const downstreamFunction = new lambda.Function(stack, 'DownstreamFunction', {","      runtime: lambda.Runtime.NODEJS_16_X,","      handler: 'downstream.handler',","      code: lambda.Code.fromAsset('lib/lambda'),","    });","","    const hitCounterProps: HitCounterProps = { downstream: downstreamFunction };","","    // Act","    const hitCounter = new HitCounter(stack, 'TestHitCounter', hitCounterProps);","","    // Assert","    expect(hitCounter.table).toBeDefined();","    expect(hitCounter.handler).toBeDefined();","  });","","  // Add more test cases as needed","});","","describe('StageFile', () => {","  let app: App;","  let stack: StageFile;","","  beforeEach(() => {","    app = new App();","    stack = new StageFile(app, 'TestStage');","  });","","  test('StageFile creates MainWorkshopStack', () => {","    // Arrange and Act (constructor is called automatically)","","    // Assert","    expect(stack.pipelinestack).toBeDefined();","    // Add more assertions as needed","  });","","  // Add more test cases as needed","});",""],"id":108}],[{"start":{"row":0,"column":34},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":109}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":49},"action":"insert","lines":["import * as lambda from 'aws-cdk-lib/aws-lambda';"],"id":110}],[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["."],"id":111},{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["l"]},{"start":{"row":4,"column":30},"end":{"row":4,"column":31},"action":"insert","lines":["i"]},{"start":{"row":4,"column":31},"end":{"row":4,"column":32},"action":"insert","lines":["b"]}],[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["/"],"id":112}],[{"start":{"row":3,"column":36},"end":{"row":3,"column":37},"action":"insert","lines":["."],"id":113},{"start":{"row":3,"column":37},"end":{"row":3,"column":38},"action":"insert","lines":["/"]}],[{"start":{"row":3,"column":38},"end":{"row":3,"column":39},"action":"insert","lines":["l"],"id":114},{"start":{"row":3,"column":39},"end":{"row":3,"column":40},"action":"insert","lines":["i"]},{"start":{"row":3,"column":40},"end":{"row":3,"column":41},"action":"insert","lines":["v"]}],[{"start":{"row":3,"column":40},"end":{"row":3,"column":41},"action":"remove","lines":["v"],"id":115}],[{"start":{"row":3,"column":40},"end":{"row":3,"column":41},"action":"insert","lines":["b"],"id":116}],[{"start":{"row":2,"column":46},"end":{"row":2,"column":47},"action":"insert","lines":["."],"id":117}],[{"start":{"row":2,"column":47},"end":{"row":2,"column":48},"action":"insert","lines":["/"],"id":118},{"start":{"row":2,"column":48},"end":{"row":2,"column":49},"action":"insert","lines":["l"]},{"start":{"row":2,"column":49},"end":{"row":2,"column":50},"action":"insert","lines":["i"]},{"start":{"row":2,"column":50},"end":{"row":2,"column":51},"action":"insert","lines":["b"]}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":52},"action":"remove","lines":["new MainWorkshopStack(app, 'TestStack');"],"id":119},{"start":{"row":12,"column":12},"end":{"row":12,"column":42},"action":"insert","lines":["const stack = new cdk.Stack();"]}],[{"start":{"row":12,"column":25},"end":{"row":12,"column":26},"action":"remove","lines":[" "],"id":120},{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"remove","lines":["="]},{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"remove","lines":[" "]},{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"remove","lines":["k"]},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"remove","lines":["c"]},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"remove","lines":["a"]},{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"remove","lines":["t"]},{"start":{"row":12,"column":18},"end":{"row":12,"column":19},"action":"remove","lines":["s"]},{"start":{"row":12,"column":17},"end":{"row":12,"column":18},"action":"remove","lines":[" "]},{"start":{"row":12,"column":16},"end":{"row":12,"column":17},"action":"remove","lines":["t"]},{"start":{"row":12,"column":15},"end":{"row":12,"column":16},"action":"remove","lines":["s"]},{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"remove","lines":["n"]},{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"remove","lines":["o"]},{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"remove","lines":["c"]}],[{"start":{"row":1,"column":49},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":121}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":35},"action":"insert","lines":["import * as cdk from 'aws-cdk-lib';"],"id":122}],[{"start":{"row":5,"column":46},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":123}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":54},"action":"insert","lines":["import { MyCodePipeline } from '../lib/main-pipeline';"],"id":124}],[{"start":{"row":51,"column":17},"end":{"row":51,"column":30},"action":"remove","lines":["pipelinestack"],"id":125},{"start":{"row":51,"column":17},"end":{"row":51,"column":31},"action":"insert","lines":["MyCodePipeline"]}],[{"start":{"row":51,"column":17},"end":{"row":51,"column":31},"action":"remove","lines":["MyCodePipeline"],"id":126},{"start":{"row":51,"column":17},"end":{"row":51,"column":31},"action":"insert","lines":["MyCodePipeline"]}],[{"start":{"row":51,"column":30},"end":{"row":51,"column":31},"action":"remove","lines":["e"],"id":127},{"start":{"row":51,"column":29},"end":{"row":51,"column":30},"action":"remove","lines":["n"]},{"start":{"row":51,"column":28},"end":{"row":51,"column":29},"action":"remove","lines":["i"]},{"start":{"row":51,"column":27},"end":{"row":51,"column":28},"action":"remove","lines":["l"]},{"start":{"row":51,"column":26},"end":{"row":51,"column":27},"action":"remove","lines":["e"]},{"start":{"row":51,"column":25},"end":{"row":51,"column":26},"action":"remove","lines":["p"]},{"start":{"row":51,"column":24},"end":{"row":51,"column":25},"action":"remove","lines":["i"]},{"start":{"row":51,"column":23},"end":{"row":51,"column":24},"action":"remove","lines":["P"]},{"start":{"row":51,"column":22},"end":{"row":51,"column":23},"action":"remove","lines":["e"]},{"start":{"row":51,"column":21},"end":{"row":51,"column":22},"action":"remove","lines":["d"]},{"start":{"row":51,"column":20},"end":{"row":51,"column":21},"action":"remove","lines":["o"]},{"start":{"row":51,"column":19},"end":{"row":51,"column":20},"action":"remove","lines":["C"]},{"start":{"row":51,"column":18},"end":{"row":51,"column":19},"action":"remove","lines":["y"]},{"start":{"row":51,"column":17},"end":{"row":51,"column":18},"action":"remove","lines":["M"]}],[{"start":{"row":51,"column":17},"end":{"row":51,"column":30},"action":"insert","lines":["pipelinestack"],"id":128}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":3},"action":"insert","lines":["// "],"id":129},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["// "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":3},"action":"insert","lines":["// "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":3},"action":"insert","lines":["// "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"insert","lines":["// "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"insert","lines":["// "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":3},"action":"insert","lines":["// "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":3},"action":"insert","lines":["// "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"insert","lines":["// "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":3},"action":"insert","lines":["// "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":3},"action":"insert","lines":["// "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"insert","lines":["// "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":3},"action":"insert","lines":["// "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":3},"action":"insert","lines":["// "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":3},"action":"remove","lines":["// "],"id":130},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"remove","lines":["// "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":3},"action":"remove","lines":["// "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":3},"action":"remove","lines":["// "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"remove","lines":["// "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"remove","lines":["// "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":3},"action":"remove","lines":["// "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":3},"action":"remove","lines":["// "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"remove","lines":["// "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":3},"action":"remove","lines":["// "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":3},"action":"remove","lines":["// "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"remove","lines":["// "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":3},"action":"remove","lines":["// "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":3},"action":"remove","lines":["// "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"remove","lines":["// "]}],[{"start":{"row":44,"column":41},"end":{"row":44,"column":42},"action":"insert","lines":["1"],"id":131}],[{"start":{"row":38,"column":0},"end":{"row":56,"column":3},"action":"remove","lines":["describe('StageFile', () => {","  let app: App;","  let stack: StageFile;","","  beforeEach(() => {","    app = new App();","    stack = new StageFile(app, 'TestStage1');","  });","","  test('StageFile creates MainWorkshopStack', () => {","    // Arrange and Act (constructor is called automatically)","","    // Assert","    expect(stack.pipelinestack).toBeDefined();","    // Add more assertions as needed","  });","","  // Add more test cases as needed","});"],"id":132},{"start":{"row":38,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["describe('StageFile', () => {","  let app: App;","  let stack: StageFile;","","  beforeEach(() => {","    app = new App();","    stack = new StageFile(app, 'TestStage');","  });","","  test('StageFile creates MainWorkshopStack', () => {","    // Arrange and Act (constructor is called automatically)","","    // Assert","    expect(stack.pipelinestack).toBeDefined(); // Corrected property name","    // Add more assertions as needed","  });","","  // Add more test cases as needed","});",""]}],[{"start":{"row":38,"column":0},"end":{"row":57,"column":0},"action":"remove","lines":["describe('StageFile', () => {","  let app: App;","  let stack: StageFile;","","  beforeEach(() => {","    app = new App();","    stack = new StageFile(app, 'TestStage');","  });","","  test('StageFile creates MainWorkshopStack', () => {","    // Arrange and Act (constructor is called automatically)","","    // Assert","    expect(stack.pipelinestack).toBeDefined(); // Corrected property name","    // Add more assertions as needed","  });","","  // Add more test cases as needed","});",""],"id":133},{"start":{"row":37,"column":0},"end":{"row":38,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":244,"scrollleft":0,"selection":{"start":{"row":31,"column":43},"end":{"row":31,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1709228760649,"hash":"b51edeaa887f1a053a906af42ab8e58a46ee1eac"}